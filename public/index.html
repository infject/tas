<!DOCTYPE html>
<html lang="en">
<head>
<link rel="icon" href="/assets/favicon.png" type="image/png">
<link href="https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap" rel="stylesheet">
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
  <title>Resonance Duel</title>

  <!-- âœ… Correct way to load your stylesheet -->
  <link rel="stylesheet" href="/style.css">
  <script src="/socket.io/socket.io.js"></script>
  <script src="/client.js" defer></script>
  <link rel="stylesheet" href="style_mobile.css" media="(max-width: 768px) and (orientation: portrait)">
  <link rel="stylesheet" href="style_mobile.css" media="(max-width: 768px) and (orientation: portrait)">
  <!-- You can add other head scripts/meta tags below if needed -->
</head>
<body>
<div id="container">

<!-- RULES -->
<div id="rules" class="rules-screen">
  <h1>ğŸ» Jack Jackson: Resonance Duel ğŸ»</h1>
  <h2>How to Play</h2>
  <p>
    Welcome to <strong>Jack Jackson: Resonance Duel</strong> â€” a chaotic drinking card game
    where mages clash through resonance and shots of real-life power.
  </p>
  <p>
 <button id="startBtn" class="start-button">Start the Duel</button>
 </p>
  <ul>
    <li>ğŸ¯ <strong>Goal:</strong> Reduce your opponentâ€™s <span class="keyword">Stability (â¤ï¸)</span> to <strong>0</strong>!</li>
    <li>ğŸŒ€ <strong>Resonance (Energy):</strong> Magical power used to play cards.</li>
    <li>â¤ï¸ <strong>Stability (Health):</strong> Lose it all, and youâ€™re out of the duel.</li>
    <li>ğŸº <strong>Drink Potion:</strong> Take a real-life sip/shot â†’ gain <strong>+1ğŸŒ€Resonance</strong> in-game.</li>
    <li>âš¡ <strong>Overload:</strong> Too much drinking or resonance? You might lose control and the game!</li>
    <li>ğŸ‘¥ <strong>Multiplayer:</strong> Join or create a room with a code and password to duel your friends online.</li>
    <li>ğŸ”¥ <strong>Turn System:</strong> Play cards strategically to drain your opponentâ€™s Stability or protect your own.</li>
  </ul>

  <p class="note">
    <strong>Remember:</strong> This is a drinking game. Drink responsibly. Know your limits. Hydrate. ğŸ’§
  </p>

  <!-- ğŸ”¹ Added: Donate-by-ads panel -->
  <div class="donate-wrap" id="adPanel">
    <h3>Support The Game</h3>
    <div class="row">
      <button id="startAuto" class="btn">Start ads</button>
      <button id="stopAuto" class="btn" style="display:none">Stop ads</button>
      <button id="nextAd" class="btn" style="display:none">Next ad</button>
    </div>
    <div class="note" id="adMsg" aria-live="polite">Click Start ads to donate by watching ads</div>
    <div class="note">Ads this session: <span class="count" id="adCount">0</span></div>
  </div>
  <!-- ğŸ”¹ /Added -->
 
</div>

<!-- LOBBY -->
<div id="lobby" class="hidden">
  <h2>Lobby</h2>
  <input id="roomCodeInput" placeholder="Room Code">
  <input id="passwordInput" type="password" placeholder="Password">
  <input id="nameInput" placeholder="Your Name"><br>
  <button id="createBtn">Create Room</button>
  <button id="joinBtn">Join Room</button>
  <h3>Available Rooms</h3>
  <div id="roomList"></div>
</div>

<!-- READY LOBBY -->
<div id="readyLobby" class="hidden">
  <h2>Waiting Room</h2>
  <p id="roomLabel"></p>
  <div id="readyPlayers"></div>

  <button id="readyBtn" class="ready-button">I'm Ready!</button>
  <div id="countdownDisplay"></div>
  <div id="diceRollArea" class="hidden">
    <img id="diceGif" src="/assets/dice_roll.gif" alt="Rolling Dice..." width="120">
  </div>
</div>
  
<!-- GAME -->
<div id="game" class="hidden">
  <div class="game-scroll">
  <div id="turnIndicator">Current Turn: --</div>
  <div class="hud" id="yourStats"></div>
  <div id="yourHand"></div>
  <div id="tableArea" style="display:none;"></div>
  <div id="historyPanel" class="history-panel hidden">
    <div class="history-inner">
      <div class="history-header">
        <h3>Game History</h3>
        <button id="closeHistoryBtn">Close</button>
      </div>
      <div id="historyContent" class="history-content"></div>
    </div>
  </div>
  <div id="otherPlayers"></div>
  <div id="controls">
    <button id="drawBtn">Draw Card</button>
    <button id="historyBtn">History</button>
    <div class="tooltip"><button id="potionBtn">Drink Potion</button>
      <span class="tooltiptext">Take a real-life shot to gain 1 Resonance</span>
    </div>
    <button id="endTurnBtn">End Turn</button>
  </div>
</div>

</div>

<!-- ğŸ”¹ Added styles for the donate panel -->
<style>
  .donate-wrap{display:flex;flex-direction:column;align-items:center;gap:.5rem;margin:1rem 0}
  .row{display:flex;gap:.5rem;flex-wrap:wrap;justify-content:center}
  .btn{padding:.75rem 1rem;border:0;border-radius:10px;font-weight:700;cursor:pointer}
  .btn[disabled]{opacity:.6;cursor:not-allowed}
  .note{font-size:.92rem;color:#555;text-align:center;max-width:32rem}
  .count{font-weight:700}
</style>

<!-- ğŸ”¹ Adcash library (load once per page) -->
<script id="aclib" type="text/javascript" src="https://acscdn.com/script/aclib.js"></script>

<!-- ğŸ”¹ Donate-by-ads logic -->
<script>
  // Use your Adcash interstitial/video zone(s). You can add more IDs to rotate.
  const ZONE_IDS = ['3kav3zuvhk']; // <-- your zone ID here
  const AUTO_INTERVAL_MS = 15000;      // interval between ads while running
  const MAX_ADS_PER_SESSION = 20;      // safety cap per session

  let running = false;
  let adCount = 0;
  let timerId = null;
  let zoneIndex = 0;

  const $ = (id) => document.getElementById(id);
  const startBtn = $('startAuto');
  const stopBtn  = $('stopAuto');
  const nextBtn  = $('nextAd');
  const msg      = $('adMsg');
  const cnt      = $('adCount');

  function say(t){ msg.textContent = t }
  function nextZoneId(){
    const id = ZONE_IDS[zoneIndex % ZONE_IDS.length];
    zoneIndex++;
    return id;
  }

  function runOneAd(){
    if(!window.aclib){
      say('Ad library blocked or not loaded â€” please disable ad blocker and try again');
      return false;
    }
    // User-initiated ad call
    aclib.runAutoTag({ zoneId: nextZoneId() });
    adCount++;
    cnt.textContent = adCount;
    return true;
  }

  function startAuto(){
    if(running) return;
    running = true;
    startBtn.style.display = 'none';
    stopBtn.style.display  = 'inline-block';
    nextBtn.style.display  = 'inline-block';
    say('Ads are running â€” click Stop ads anytime');
    runOneAd(); // first ad immediately

    timerId = setInterval(()=>{
      if(!running) return;
      if(adCount >= MAX_ADS_PER_SESSION){
        say('Session limit reached â€” thanks for the support');
        stopAuto();
        return;
      }
      runOneAd();
    }, AUTO_INTERVAL_MS);
  }

  function stopAuto(){
    running = false;
    if(timerId){ clearInterval(timerId); timerId = null; }
    startBtn.style.display = 'inline-block';
    stopBtn.style.display  = 'none';
    nextBtn.style.display  = 'inline-block'; // manual â€œNext adâ€ still available
    say('Stopped â€” you can resume or use Next ad anytime');
  }

  function manualNext(){
    if(adCount >= MAX_ADS_PER_SESSION){
      say('Session limit reached â€” start a new session later');
      return;
    }
    runOneAd();
  }

  // Pause if the tab is hidden (prevents background runs)
  document.addEventListener('visibilitychange', ()=>{
    if(document.hidden && running) stopAuto();
  });

  startBtn.addEventListener('click', startAuto);
  stopBtn .addEventListener('click', stopAuto);
  nextBtn .addEventListener('click', manualNext);
</script>
<!-- ğŸ”¹ /Donate-by-ads -->

</body>
</html>
